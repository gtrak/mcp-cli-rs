---
phase: 15-documentation-api
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - src/lib.rs
  - src/cli/mod.rs
  - src/config/mod.rs
  - src/daemon/mod.rs
  - src/pool/mod.rs

must_haves:
  truths:
    - "Public API surface reduced by 50-100 lines of unnecessary exports"
    - "Only necessary functions and structs are publicly exported"
    - "Unnecessary exports marked as private (doc-2 compliance)"
  artifacts:
    - path: "src/lib.rs"
      provides: "Cleaned public API exports"
      contains: "reduced re-exports"
    - path: "src/cli/mod.rs"
      provides: "Internal CLI types not exposed"
    - path: "src/config/mod.rs"
      provides: "Internal config types not exposed"
    - path: "src/daemon/mod.rs"
      provides: "Internal daemon types not exposed"
---

<objective>
Audit and reduce the public API surface by marking unnecessary exports as private (DOC-02, DOC-03, SIZE-05).

Purpose: Smaller API surface means less maintenance burden and clearer public contract.
Output: Reduced public API with 50-100 fewer lines of exports.
</objective>

<execution_context>
@./.opencode/get-shit-done/workflows/execute-plan.md
@./.opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/REQUIREMENTS.md (DOC-02, DOC-03, SIZE-05)
@.planning/ROADMAP.md (Phase 15: Documentation & API)
@.planning/STATE.md
</context>

<tasks>

<task type="auto">
  <name>Audit public API exports in lib.rs</name>
  <files>src/lib.rs</files>
  <action>
Review all public exports in lib.rs:
1. Identify modules that don't need to be public (internal implementation details)
2. Identify structs/functions that are only used internally
3. Change `pub use` to internal use where external users don't need access
4. Target removing 50-100 lines of unnecessary exports

Common candidates:
- Internal helper modules that were made public for testing
- Re-exports that nobody actually uses
- Duplicate types already available elsewhere

Example: If a type is only used within the crate, remove it from the public API.
  </action>
  <verify>Run `cargo doc --document-private-items 2>&1 | wc -l` to see total items, compare before/after</verify>
  <done>Public API reduced by identifying and hiding unnecessary exports</done>
</task>

<task type="auto">
  <name>Verify internal modules don't leak public types</name>
  <files>src/cli/mod.rs, src/config/mod.rs, src/daemon/mod.rs, src/pool/mod.rs</files>
  <action>
Check each major module's public API:
1. Review `pub` items in each module
2. Determine if they're truly needed externally
3. Mark as `pub(crate)` or private where appropriate
4. Ensure backward compatibility is maintained

Focus on:
- CLI modules (list, info, call, search, formatters)
- Config modules (types, parser, validator)
- Daemon modules
- Pool module
  </action>
  <verify>Cargo check passes, no breaking changes in existing tests</verify>
  <done>Internal types properly scoped, no leaking to public API</done>
</task>

</tasks>

<verification>
- Run `cargo check` - must pass
- Run tests to verify no breaking changes
- Compare `cargo doc` output size before/after
</verification>

<success_criteria>
- [ ] 50-100 lines of unnecessary exports removed
- [ ] All tests pass (no breaking changes)
- [ ] Only essential types remain in public API
</success_criteria>

<output>
After completion, create `.planning/phases/15-documentation-api/15-02-SUMMARY.md`
</output>
