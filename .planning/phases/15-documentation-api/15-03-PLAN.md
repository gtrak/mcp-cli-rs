---
phase: 15-documentation-api
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - src/cli/mod.rs
  - src/config/mod.rs
  - src/daemon/mod.rs
  - src/pool/mod.rs
  - src/format/mod.rs
  - src/transport.rs
  - src/error.rs
  - src/retry.rs

must_haves:
  truths:
    - "All public modules have clear documentation explaining purpose and usage"
    - "All public functions have rustdoc comments"
    - "Public APIs include usage examples where helpful"
  artifacts:
    - path: "src/cli/mod.rs"
      provides: "Module documentation with examples"
    - path: "src/config/mod.rs"
      provides: "Module documentation with examples"
    - path: "src/daemon/mod.rs"
      provides: "Module documentation with examples"
    - path: "src/format/mod.rs"
      provides: "Module documentation with examples"
---

<objective>
Improve module-level documentation with clear scope and usage examples (DOC-04). Ensure all public APIs have rustdoc comments with examples (DOC-05).

Purpose: Good documentation helps users understand the library's boundaries and how to use it.
Output: Well-documented public API with examples.
</objective>

<execution_context>
@./.opencode/get-shit-done/workflows/execute-plan.md
@./.opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/REQUIREMENTS.md (DOC-04, DOC-05)
@.planning/ROADMAP.md (Phase 15: Documentation & API)
@.planning/STATE.md
</context>

<tasks>

<task type="auto">
  <name>Add module-level documentation with examples</name>
  <files>src/cli/mod.rs, src/config/mod.rs, src/daemon/mod.rs, src/pool/mod.rs, src/format/mod.rs</files>
  <action>
Add comprehensive module-level documentation:
1. Each public module should have `//!` comments at the top
2. Documentation should include:
   - What the module provides
   - When to use this module vs alternatives
   - Basic usage example (if applicable)

Focus on these modules:
- src/cli/mod.rs - CLI command handling
- src/config/mod.rs - Configuration types and parsing
- src/daemon/mod.rs - Daemon lifecycle and state
- src/pool/mod.rs - Connection pooling
- src/format/mod.rs - Output formatting

Example format:
```rust
//! CLI Command Handling
//!
//! This module provides the core command implementations for the MCP CLI.
//! Use this module when implementing new commands or modifying existing ones.
//!
//! ## Usage
//! ```rust
//! use mcp_cli::cli::list_servers;
//! ```
```
  </action>
  <verify>Run `cargo doc 2>&1` - each module should have docs visible</verify>
  <done>All public modules have documentation with examples</done>
</task>

<task type="auto">
  <name>Add rustdoc comments to public functions</name>
  <files>src/transport.rs, src/error.rs, src/retry.rs, src/output.rs</files>
  <action>
Review and improve rustdoc comments on public functions:
1. Check each `pub fn` and `pub struct`
2. Add/fix `///` doc comments
3. Add examples where helpful (using `/// # Example` or `/// ```rust`)

Focus on:
- Transport trait and implementations
- Error types
- Retry configuration
- Output formatting

If a function already has good docs, leave it. Focus on undocumented items.
  </action>
  <verify>Run `cargo doc 2>&1 | grep -E "warning:"` - should have no missing docs warnings</verify>
  <done>All public functions have rustdoc comments with examples</done>
</task>

</tasks>

<verification>
- Run `cargo doc` - all modules documented
- Check that examples compile (use `cargo test --doc`)
</verification>

<success_criteria>
- [ ] All public modules have module-level documentation with examples
- [ ] All public functions have rustdoc comments
- [ ] `cargo test --doc` passes
</success_criteria>

<output>
After completion, create `.planning/phases/15-documentation-api/15-03-SUMMARY.md`
</output>
