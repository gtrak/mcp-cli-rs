---
phase: 16-code-quality-sweep
plan: 04
type: execute
wave: 2
depends_on: [16-01, 16-02, 16-03]
files_modified: []

must_haves:
  truths:
    - "All unwrap() calls replaced with proper error handling"
    - "No unnecessary dead code attributes"
    - "Consistent error handling patterns"
    - "Codebase at or below size target"
    - "Zero clippy warnings"
  artifacts:
    - verification results
      provides: "QUAL-01 through QUAL-05 compliance proof"
---

<objective>
Final verification that all Phase 16 code quality requirements are met.

Purpose: Ensure all quality work is complete and compliant.
Output: Verified zero warnings, safe error handling, proper size.
</objective>

<execution_context>
@./.opencode/get-shit-done/workflows/execute-plan.md
@./.opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/REQUIREMENTS.md (QUAL-01 through QUAL-05, SIZE-01)
@.planning/ROADMAP.md (Phase 16)
@.planning/phases/16-code-quality-sweep/16-CONTEXT.md
</context>

<tasks>

<task type="auto">
  <name>Verify no bare unwrap() calls remain</name>
  <files>src/**/*.rs</files>
  <action>
Final check for unwrap():
1. Run `grep -r "\.unwrap()" src/ --include="*.rs" | grep -v "test\|mod tests"`
2. If any remain, fix them
3. Ensure only test code uses unwrap()
  </action>
  <verify>grep -c "\.unwrap()" src/ returns 0 or only test code</verify>
  <done>Zero unwrap in production code</done>
</task>

<task type="auto">
  <name>Verify zero dead code attributes</name>
  <files>src/**/*.rs</files>
  <action>
Final check:
1. Run `grep -r "allow(dead_code)" src/`
2. Should return zero matches
  </action>
  <verify>grep returns no matches</verify>
  <done>No dead code attributes</done>
</task>

<task type="auto">
  <name>Run full quality checks</name>
  <files>all source files</files>
  <action>
Run comprehensive quality checks:
1. `cargo clippy --lib` - must have zero warnings
2. `cargo fmt --check` - must pass
3. Count total lines - should be 10,800-11,500 range
4. `cargo test --lib` - all tests pass
  </action>
  <verify>All checks pass</verify>
  <done>All quality checks pass</done>
</task>

</tasks>

<verification>
- `cargo clippy --lib` = zero warnings
- `cargo fmt --check` = passes
- Line count = 10,800-11,500 (current: ~9,570, already below!)
- `cargo test` = all pass
</verification>

<success_criteria>
- [ ] QUAL-01: No unwrap() in production
- [ ] QUAL-02: No unnecessary dead_code attributes
- [ ] QUAL-03: Consistent error handling patterns
- [ ] QUAL-04: All functions use Result properly
- [ ] QUAL-05: Zero clippy warnings (maintained)
- [ ] SIZE-01: Codebase in 10,800-11,500 range (ALREADY ACHIEVED: ~9,570)
</success_criteria>

<output>
After completion, create `.planning/phases/16-code-quality-sweep/16-04-SUMMARY.md`
</output>
