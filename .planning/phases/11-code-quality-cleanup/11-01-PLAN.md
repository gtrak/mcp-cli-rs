---
phase: 11
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/cli/commands.rs
  - src/cli/daemon.rs
autonomous: true
user_setup: []

must_haves:
  truths:
    - "src/cli/commands.rs has no unused imports"
    - "src/cli/daemon.rs has no commented-out code"
    - "Code passes clippy checks with no warnings"
    - "Code passes cargo fmt check"
  artifacts:
    - path: "src/cli/commands.rs"
      provides: "CLI command implementations"
      clean: "No unused imports"
    - path: "src/cli/daemon.rs"
      provides: "Daemon lifecycle management"
      clean: "No commented-out code"
  key_links:
    - from: "Cargo.toml"
      to: "src/cli/commands.rs"
      via: "Build verification"
      pattern: "cargo clippy.*"
    - from: "Cargo.toml"
      to: "src/cli/daemon.rs"
      via: "Format validation"
      pattern: "cargo fmt.*"
---

<objective>
Clean up minor code quality issues to maintain clean, maintainable codebase.

Purpose: Remove unused imports and commented-out code to improve code maintainability and pass linting checks.
Output: Clean codebase with no unused imports or commented-out code, passing clippy and fmt checks.
</objective>

<execution_context>
@./.opencode/get-shit-done/workflows/execute-plan.md
@./.opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/STATE.md
@.planning/ROADMAP.md

# Current code state
@src/cli/commands.rs
@src/cli/daemon.rs
</context>

<tasks>

<task type="auto">
  <name>Task 1: Remove unused imports in commands.rs</name>
  <files>src/cli/commands.rs</files>
  <action>
    Identify and remove any unused imports at the top of src/cli/commands.rs:
    1. Run `cargo check --message-format=short` to identify unused import warnings
    2. Remove each unused import line
    3. Verify compilation still succeeds with `cargo check`
    4. If no unused imports exist, document this finding in a comment above the imports

    Common unused imports to check:
    - `futures_util::FutureExt` (may not be used after refactoring)
    - `std::sync::Arc` (may be unused if references changed)
    - `tokio::sync::Mutex` (may be unused if async patterns changed)

    Do NOT remove imports that are actually used. Use clippy warnings as authoritative source.
  </action>
  <verify>Run `cargo clippy -- -W unused_imports` and verify no warnings</verify>
  <done>src/cli/commands.rs has no unused imports (verified by clippy)</done>
</task>

<task type="auto">
  <name>Task 2: Remove commented-out code in src/cli/daemon.rs</name>
  <files>src/cli/daemon.rs</files>
  <action>
    Identify and remove any commented-out code in src/cli/daemon.rs:
    1. Scan the file for `//` comments that contain actual code (not explanatory comments)
    2. Look for patterns like:
       - `// TODO: ...` (if the TODO is outdated or resolved)
       - `// let x = ...` (commented-out variable declarations)
       - `// if ...` (commented-out conditional logic)
       - `// println!(...)` (commented-out debug statements)
    3. Remove the commented-out lines or replace with brief explanatory comments if the reason is unclear
    4. Keep legitimate inline comments that explain code flow (e.g., "// Connect to daemon" explaining the logic)

    Preserve:
    - Module documentation (`//! CLI daemon lifecycle management.`)
    - Function documentation (`/// Ensure daemon is running ...`)
    - Inline comments that explain WHY (not WHAT) the code does
  </action>
  <verify>Review src/cli/daemon.rs visually to ensure no commented-out code remains</verify>
  <done>src/cli/daemon.rs has no commented-out code, only explanatory comments</done>
</task>

<task type="auto">
  <name>Task 3: Run clippy and fmt checks</name>
  <files>Cargo.toml</files>
  <action>
    Run standard Rust linting and formatting checks to ensure code quality:
    1. Run `cargo clippy --all-targets --all-features` - fixes any warnings
    2. Run `cargo fmt --check` - checks if code is properly formatted
    3. If fmt check fails, run `cargo fmt` to auto-format
    4. Run `cargo check` to ensure compilation succeeds
    5. Document any warnings that require manual review or are false positives

    For any clippy warnings that cannot be auto-fixed:
    - Add `#[allow(clippy::warning_name)]` attribute if intentional
    - Fix the code if it's a legitimate issue
    - Document rationale for allowed warnings in a code comment
  </action>
  <verify>
    1. `cargo clippy --all-targets --all-features` returns with exit code 0 (no warnings)
    2. `cargo fmt --check` returns with exit code 0 (code is formatted)
    3. `cargo check` succeeds without errors
  </verify>
  <done>Code passes all clippy and fmt checks with no warnings or formatting issues</done>
</task>

</tasks>

<verification>
- No clippy warnings on full codebase
- Code passes cargo fmt check
- Cargo check succeeds without errors
- All three cleanup tasks complete successfully
</verification>

<success_criteria>
- src/cli/commands.rs has no unused imports (verified by clippy)
- src/cli/daemon.rs has no commented-out code (verified manually)
- cargo clippy passes with exit code 0
- cargo fmt --check passes with exit code 0
- Documentation comment about cleanup findings added if no issues found
</success_criteria>

<output>
After completion, create `.planning/phases/11-code-quality-cleanup/11-01-SUMMARY.md`
</output>
